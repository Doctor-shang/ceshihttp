<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <button id="btn">
        sssssss
    </button>
</body>
<script>
    let token = '1111'
    btn.onclick = function () {
        timedGetText('http://127.0.0.1:8090/invoice/askGrantAuthorization?platform=PLATFROM_NUONUO', 10, (res) => {
            console.log(res)
        })
    }
    function timedGetText( url, time, callback ){
    var request = new XMLHttpRequest();
    var timeout = false;
    var timer = setTimeout( function(){
        timeout = true;
        request.abort();
    }, time );
    request.open( "GET", url );
    request.setRequestHeader("token",token); 
    request.onreadystatechange = function(){
        if( request.readyState !== 4 ) return;
        if( timeout ) return;
        clearTimeout( timer );
        if( request.status === 200 ){
            callback( request.responseText );
        }
    }
    request.send( null );
}
</script>
</html>